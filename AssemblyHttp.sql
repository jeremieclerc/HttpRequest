-- Active clr if disabled
IF (SELECT TOP 1 value FROM sys.configurations WHERE name = 'clr enabled') != 1
BEGIN
    EXEC sp_configure 'clr enabled', 1
    RECONFIGURE
END
DECLARE @sql nvarchar(MAX), @hash varbinary(64)
-- the following binary correspond to the assembly
DECLARE @clrBinary varbinary(MAX) = 0x4D5A90000300000004000000FFFF0000B800000000000000400000000000000000000000000000000000000000000000000000000000000000000000800000000E1FBA0E00B409CD21B8014CCD21546869732070726F6772616D2063616E6E6F742062652072756E20696E20444F53206D6F64652E0D0D0A2400000000000000504500004C010300B7DFE2660000000000000000E00022200B013000002400000006000000000000AA43000000200000006000000000001000200000000200000400000000000000060000000000000000A000000002000000000000030060850000100000100000000010000010000000000000100000000000000000000000584300004F00000000600000B802000000000000000000000000000000000000008000000C000000204200001C0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000080000000000000000000000082000004800000000000000000000002E74657874000000B0230000002000000024000000020000000000000000000000000000200000602E72737263000000B8020000006000000004000000260000000000000000000000000000400000402E72656C6F6300000C0000000080000000020000002A000000000000000000000000000040000042000000000000000000000000000000008C430000000000004800000002000500642B0000BC16000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001B300600F808000001000011000F00FE16090000016F0600000A6F0700000A6F0800000A0A0F01FE16090000016F0600000A0B0F02FE16090000016F0600000A0C0F03FE16090000016F0600000A0D1613041613051613067201000070130772010000701308730900000A1309730A00000A130A00067203000070280B00000A2C4E06720B000070280B00000A2C41067215000070280B00000A2C3406721D000070280B00000A2C27067227000070280B00000A2C1A067235000070280B00000A2C0D067241000070280B00000A2B0116130B110B2C1900725100007006729D000070280C00000A13070038F6050000077236010070280D00000A130C110C2C0E00724001007013070038D7050000076F0E00000A19310F076F0E00000A20D0070000FE022B0117130D110D2C28007282010070076F0E00000A130E120E280F00000A721B02007007281000000A13070038900500000020C00F0000281100000A0007281200000A740C000001130F110F066F1300000A0008280300000613100011106F1400000A131338650400001213281500000A1314001214281600000A6F0700000A13191119131811182805000006131A111A20B2E12165357D111A20E9179E20352D111A2058D565023B370100002B00111A208915C00E3B130100002B00111A20E9179E203BC300000038CC030000111A2019C0262A351F111A204E5CE2253B590100002B00111A2019C0262A3BB100000038A4030000111A20681F23613B920100002B00111A20B2E121653B420100003885030000111A200C056CB1352D111A20A46517833B800100002B00111A207D28CF9C3B460100002B00111A200C056CB13BE0000000384F030000111A2099F407C0351C111A204669E5B93BB00000002B00111A2099F407C02E4D382A030000111A20757E29EB3BEC0000002B00111A202F3EF0ED2E73380E03000011187237020070280D00000A3A2301000038F802000011187245020070280D00000A3A2101000038E20200001118725B020070280D00000A3A3701000038CC02000011187265020070280D00000A3A3A01000038B602000011187289020070280D00000A3A3D01000038A002000011187297020070280D00000A3A3B010000388A020000111872A1020070280D00000A3A390100003874020000111872B1020070280D00000A3A37010000385E020000111872D5020070280D00000A3A350100003848020000111872EB020070280D00000A3A330100003832020000111872F7020070280D00000A3A64010000381C02000011187211030070280D00000A3A6201000038060200001118722F030070280D00000A3A7101000038F00100001118723F030070280D00000A3A8801000038DA010000110F1214281700000A6F1800000A0038FA0100001214281700000A6F0700000A724D030070280D00000A131B111B2C0B00110F166F1900000A000038CE010000110F1214281700000A281A00000A6F1B00000A0038B5010000110F1214281700000A281A00000A6F1C00000A00389C010000110F1214281700000A6F1D00000A003888010000110F1214281700000A6F1E00000A003874010000110F1214281700000A6F1F00000A003860010000110F1214281700000A6F2000000A00384C010000110F1214281700000A6F2100000A0038380100001214281700000A178D2500000125161F2D9D6F2200000A131511158E6918FE01131C111C2C1C00110F1115169A282300000A1115179A282300000A6F2400000A000038F1000000110F1214281700000A6F2500000A0038DD0000001214281700000A1216282600000A131D111D2C0C00110F11166F2700000A000038B80000001214281700000A1217282800000A131E111E2C1400110F1117163003152B0211176F2900000A0000388B0000001214281700000A6F0700000A7259030070280D00000A131F111F2C3900110F256F2A00000A7E05000004252D17267E04000004FE0609000006732B00000A258005000004282C00000A741B0000016F2D00000A00002B341214281600000A6F0E00000A18FE02132011202C1D00110F6F2E00000A1214281600000A1214281700000A6F2F00000A00002B00001213283000000A3A8FFBFFFFDE0F1213FE160200001B6F3100000A00DC067203000070280B00000A2C16096F0E00000A16310D097236010070280B00000A2B0116132111212C6300283200000A096F3300000A1322110416FE01132411242C0F00110F72650300706F2500000A0000110516FE01132511252C0F00110F11228E696A6F2700000A0000110F6F3400000A1323112311221611228E696F3500000A0011236F3600000A0000110F6F3700000A740E000001131111116F3800000A733900000A131211126F3A00000A130711116F3B00000A130611116F3C00000A130911116F3D00000A0011126F3E00000A000000DE6E13260011266F3F00000A14FE03132711272C440011266F3F00000A750E000001132811286F3B00000A130611266F3F00000A6F3800000A733900000A6F3A00000A130711286F3C00000A130911286F3D00000A00002B140011266F4000000A130711266F4100000A13060000DE0011096F4200000A16FE021329112939D80000000072A903007013080011096F4300000A132A16132B3895000000112A112B9A132C001C8D1F00000125161108A2251772AD030070A22518112CA2251972B1030070A2251A1109112C6F4400000A72B903007072BD0300706F4500000A72AD03007072C30300706F4500000A72C903007072CD0300706F4500000A72D303007072D70300706F4500000A72DD03007072E10300706F4500000AA2251B72E7030070A2284600000A130800112B1758132B112B112A8E693F60FFFFFF110811086F0E00000A1759176F4700000A72ED030070284800000A13080011072C0C11076F0E00000A16FE012B0117132D112D2C050014130700110620091513803307110714FE032B0116132E112E2C4800110772F10300706F4900000A132F112F2C1200110772F9030070284800000A1307002B221107728A0400706F4900000A133011302C10001107729A040070284800000A1307000011082C0C11086F0E00000A16FE012B0117133111312C050014130800110A1106284A00000A1107284B00000A1108284B00000A73060000066F4C00000A26110A13322B0011322A41340000020000007E01000078040000F60500000F00000000000000000000006800000075060000DD0600006E00000013000001133002002D00000002000011000274040000020A03067B01000004811400000104067B02000004810900000105067B0300000481090000012A0000001B3005000F0100000300001100734D00000A0A026F0800000A10000272A90300706F4E00000A0D092C0902176F4F00000A10000272ED0300706F5000000A130411042C110216026F0E00000A17596F5100000A1000721A050070735200000A0B07026F5300000A0C00086F5400000A13052B7C11056F5500000A741800000113060011066F5600000A176F5700000A6F5800000A130711066F5600000A186F5700000A6F5800000A1308110872AD0300706F4E00000A2C0E110872AD0300706F5000000A2B0116130911092C16001108178D2500000125161F229D6F5900000A13080006110711086F5A00000A000011056F5B00000A3A78FFFFFFDE1611057519000001130A110A2C08110A6F3100000A00DC06130B2B00110B2A0001100000020065008CF10016000000002202285C00000A002A000000133002002E00000004000011022C2920C59D1C810A160B2B1402076F5D00000A066120930100015A0A0717580B07026F0E00000A2F022BE1062A7A02285C00000A000002037D0100000402047D0200000402057D030000042A2E730800000680040000042A0A172A42534A4201000100000000000C00000076342E302E33303331390000000005006C00000080050000237E0000EC050000CC07000023537472696E677300000000B80D00005C0500002355530014130000100000002347554944000000241300009803000023426C6F620000000000000002000001571502080902000000FA0133001600000100000031000000050000000500000009000000110000005D0000000600000004000000030000000100000003000000020000000000E803010000000000060098026C050600B8026C0506006F0259050F008C0500000600C50647040A00830217050A00E900170506005E0117060A000A03A3050E009704D7060600510717060E002F07D70606003600A1000E00E601D7060600D0047E0037004105000006002700A10006002E047E000E00AB04D7060A001E00A3050E008507F8050E007704F8050600320517060E002703F80506006A014704060054026C050E007403B80706002202B8050E005304B8050E008706B8070600160347040600210047040E00EF04D7060E008701D7060E003307D7060600760147040600CB0447040600430047040600450247040E006304C0000600010379070E00EA01D7060600DD047E000E002E01D7060600AE0447040E00C001C0000E008704F8050E00C504F8050E00B801F8050000000056000000000001000100010010002A060000150001000100000100005F00000015000100050003001000BA060000150001000600032110009D00000015000400070006003D01F20106008B07F60106007606F60136005200FA0116000100FE01502000000000960045070202010088290000000096003E070F020500C42900000000910060061D020900F02A0000000086184C0506000A00FC2A0000000093002D0327020A00362B0000000086184C052C020B00552B000000009118520536020E00F02A0000000086184C0506000E00612B0000000083000A003A020E0000000100AC01000002000E04000003007F06000004009107000001007003020002003E0102000300F901020004007706000001006D0600000100B106000001003E01000002008C0700000300770600000100E804000002003202000003005D0400000400970609004C05010011004C05060019004C050A0031004C050600D1004C050600290014036100F90003056100F9004E04610051004C05060059004C050600F900AA076500F900B3066B00F9009E076500F9003F037200010114036100F900B30676000901F9037E0019013E0285001901F8008C000C003E05980014000E07AA001C009607BC001C00D602C100610024078C006100E002C60021011302CB0061001902D20061000B01D2006100CC068C0061005B078C0061000B058C006100F5028C00610000078C00F900EE06D90001011302E00061005501E50019019C018C0031011002EB0019014A03F20001011002F70019016407010061009803FE00D9004C05030139017F0109016100C0031501190154061B014101BC002001140070072601C90008020600490149002A014901E605300119012404360191004E023B019100020206001901F601430151011204360179004C0549015901DF00610071001F014F01510154061B015101020206005901020206009900D90143016901490161006901F406720071011A0772004101A7065501410135045A01F90003015F01F900B3066501F900EE026B01F900B3067101F900EF057701A100E2067C014900E20682015900BC0088010C004C050600F90065037701F9001D03B001F9005C037701F9001D036B01A9004C058C00A9009B05B501B1003E05BB01B9000E07C001C1003F06C40179013504CA018901D6026100F9004E04D1010C003E04D701B9007007260129004C050600F9004A06E4012000230076022E000B0045022E0013004E022E001B006D0263002B009103A3002B00910310008D019201DF019100A300B500048000000000000000000000000000000000B8040000040000000000000000000000E901940000000000040000000000000000000000E901880000000000040000000000000000000000E90147040000000004000200050002000000003C3E395F5F315F30003C48747470526571756573743E625F5F315F300053716C496E743332004B657956616C75655061697260320044696374696F6E617279603200496E743634006765745F55544638003C3E39003C4D6F64756C653E003C50726976617465496D706C656D656E746174696F6E44657461696C733E0053797374656D2E494F0053797374656D2E44617461006D73636F726C6962003C3E630053797374656D2E436F6C6C656374696F6E732E47656E65726963004164640053797374656D2E436F6C6C656374696F6E732E5370656369616C697A65640052656164546F456E6400446174614163636573734B696E64007365745F4D6574686F64005265706C616365007365745F49664D6F64696669656453696E6365006765745F537461747573436F64650048747470537461747573436F64650072537461747573436F6465006765745F4D6573736167650041646452616E67650049456E756D657261626C650049446973706F7361626C65004461746554696D6500436F6D62696E6500536563757269747950726F746F636F6C54797065007365745F436F6E74656E74547970650072657175657374547970650043617074757265004E616D654F626A656374436F6C6C656374696F6E42617365006765745F526573706F6E73650048747470576562526573706F6E736500476574526573706F6E736500436C6F736500446973706F7365005472795061727365007365745F4461746500583530394365727469666963617465006365727469666963617465004372656174650044656C656761746500577269746500436F6D70696C657247656E6572617465644174747269627574650044656275676761626C654174747269627574650053716C46756E6374696F6E41747472696275746500436F6D70696C6174696F6E52656C61786174696F6E734174747269627574650052756E74696D65436F6D7061746962696C697479417474726962757465006765745F56616C7565007365745F4B656570416C6976650052656D6F7665007365745F5472616E73666572456E636F64696E670053716C537472696E6700546F537472696E6700537562737472696E67004D6174636800436F6D70757465537472696E6748617368006765745F4C656E677468007365745F436F6E74656E744C656E67746800456E6473576974680053746172747357697468006F626A0052656D6F7465436572746966696361746556616C69646174696F6E43616C6C6261636B006765745F536572766572436572746966696361746556616C69646174696F6E43616C6C6261636B007365745F536572766572436572746966696361746556616C69646174696F6E43616C6C6261636B00417373656D626C79487474702E646C6C007365745F536563757269747950726F746F636F6C0075726C00476574526573706F6E736553747265616D004765745265717565737453747265616D006765745F4974656D007365745F4974656D0053797374656D005472696D0058353039436861696E00636861696E004E616D6556616C7565436F6C6C656374696F6E004D61746368436F6C6C656374696F6E0047726F7570436F6C6C656374696F6E00576562486561646572436F6C6C656374696F6E00576562457863657074696F6E00417373656D626C79487474700047726F757000436861720053747265616D52656164657200546578745265616465720073656E6465720053657276696365506F696E744D616E6167657200546F5570706572007365745F52656665726572004D6963726F736F66742E53716C5365727665722E5365727665720049456E756D657261746F7200476574456E756D657261746F72002E63746F72002E6363746F720053797374656D2E446961676E6F73746963730053797374656D2E52756E74696D652E436F6D70696C6572536572766963657300446562756767696E674D6F646573004D6174636865730053797374656D2E446174612E53716C54797065730053797374656D2E53656375726974792E43727970746F6772617068792E5835303943657274696669636174657300476574427974657300436F6E7461696E730053797374656D2E546578742E526567756C617245787072657373696F6E730053797374656D2E436F6C6C656374696F6E730055736572446566696E656446756E6374696F6E73006765745F47726F757073006765745F4368617273006765745F486561646572730050617273654865616465727300694865616465727300724865616465727300686561646572730053736C506F6C6963794572726F72730073736C506F6C6963794572726F7273006765745F416C6C4B65797300436F6E63617400487474705265706F6E73654F626A656374007365745F4578706563740053797374656D2E4E6574006F705F496D706C696369740053706C6974006765745F48526573756C74007365745F557365724167656E74006765745F43757272656E74006765745F436F756E74007365745F4163636570740048747470576562526571756573740046696C6C526F7748747470526571756573740041727261794C697374007365745F486F7374007365745F54696D656F7574004D6F76654E6578740053797374656D2E546578740052656765780072426F647900626F6479006765745F4B6579006F705F457175616C697479006F705F496E657175616C6974790053797374656D2E4E65742E53656375726974790000010007470045005400000950004F0053005400000750005500540000094800450041004400000D440045004C00450054004500000B54005200410043004500000F4F005000540049004F004E005300004B4D006500740068006F00640020006E006F007400200073007500700070006F0072007400650064002E0020004D006500740068006F00640073002000750073006500640020003A0020000080972E0020004C0069007300740020006F006600200073007500700070006F00720074006500640020006D006500740068006F006400730020003A0020004700450054002C00200050004F00530054002C0020005000550054002C00200048004500410044002C002000440045004C004500540045002C002000540052004100430045002C0020004F005000540049004F004E0053002E0000094E0075006C006C00004150006C00650061007300650020007300700065006300690066007900200061006E002000550052004C00200074006F0020007200650071007500650073007400008097550052004C0020006E006F007400200073007500700070006F0072007400650064002E002000550052004C0020006C0065006E0067007400680020006D0075007300740020006200650020006200650074007700650065006E0020003300200061006E006400200032003000300030002E002000430075007200720065006E00740020006C0065006E0067007400680020003A002000001B2E002000550052004C002000560061006C00750065003A002000000D410043004300450050005400001543004F004E004E0045004300540049004F004E00000944004100540045000023490046002D004D004F004400490046004900450044002D00530049004E0043004500010D450058005000450043005400000948004F0053005400000F520045004600450052004500520000235400520041004E0053004600450052002D0045004E0043004F00440049004E004700011555005300450052002D004100470045004E005400010B520041004E0047004500001943004F004E00540045004E0054002D005400590050004500011D43004F004E00540045004E0054002D004C0045004E00470054004800010F540049004D0045004F0055005400000D560045005200490046005900000B43004C004F0053004500000B460041004C005300450000436100700070006C00690063006100740069006F006E002F0078002D007700770077002D0066006F0072006D002D00750072006C0065006E0063006F0064006500640001037B0000032200000722003A00220000035C0000055C005C0000055C00220000030A0000055C006E0000030D0000055C0072000003090000055C007400000522002C0000037D000007530053004C0000808F200059006F0075002000630061006E00200062007900700061007300730020007400680065002000530053004C002F0054004C005300200063006800650063006B0020007500730069006E0067002000740068006500200020006800650061006400650072003A0020007B00220056006500720069006600790022003A002200460061006C007300650022007D00000F740069006D0065006F0075007400007F200059006F0075002000630061006E00200069006E00630072006500610073006500200079006F00750072002000740069006D0065006F007500740020007500730069006E006700200074006800650020006800650061006400650072003A0020007B002200540069006D0065006F007500740022003A002D0031007D000141220028005B005E0022005D002B00290022005C0073002A003A005C0073002A00280022005B005E0022005D002A0022007C005B0030002D0039005D002B00290001BE0B1726FEFBC8409B00A32E6A76E434000420010108032000010520010111115007330E0E0E0E0202080E0E1229122D020202081231151235020E0E1239123D151141020E0E151145020E0E1D0E0A080E0E09020202020202021D0512490202124D021239021D0E080E020202020212210320000E050002020E0E0600030E0E0E0E032000080700040E0E0E0E0E0600010111808906000112808D0E042001010E06151235020E0E0A2000151141021300130106151141020E0E0A2000151145021300130106151145020E0E0420001300042000130104200101020600011180910E062001011180910620011D0E1D03040001080E052002010808060002020E100A042001010A060002020E1008042000126D052002011C180B000212809D12809D12809D05200101126D0420001229052002010E0E032000020500001280A50520011D050E0420001249072003011D0508080520001280A90520010112490520001180B10420001D0E0420010E0E0520020E0E0E0500010E1D0E0520020E08080500020E0E0E042001020E05000111510805000111250E042001081C04070112101D070C151235020E0E125512590202125D12610E0E021265151235020E0E0420010E0805200112590E042000125D0320001C0520001280BD0620011280C1080520010E1D0307200201130013010407020908042001030808B77A5C561934E0890306115103061125030612140306126D0C0004122111251125112511250D0004011C101151101125101125090001151235020E0E0E040001090E09200301115111251125030000010A2004021C1271127511790801000800000000001E01000100540216577261704E6F6E457863657074696F6E5468726F777301080100070100000000811901000400540E1146696C6C526F774D6574686F644E616D651246696C6C526F774874747052657175657374540E0F5461626C65446566696E6974696F6E3D537461747573436F646520494E542C20526573706F6E7365204E56415243484152284D4158292C2048656164657273204E56415243484152284D4158295455794D6963726F736F66742E53716C5365727665722E5365727665722E446174614163636573734B696E642C2053797374656D2E446174612C2056657273696F6E3D342E302E302E302C2043756C747572653D6E65757472616C2C205075626C69634B6579546F6B656E3D623737613563353631393334653038390A446174614163636573730100000054020F497344657465726D696E6973746963000401000000000000000000B7DFE26600000000020000001C0100003C4200003C24000052534453FDD753D2DD9E2048BA0838165B84C5A101000000433A5C55736572735C6D65796E69656C615C736F757263655C7265706F735C48747470526571756573745C417373656D626C79487474705C6F626A5C44656275675C417373656D626C79487474702E706462000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008043000000000000000000009A4300000020000000000000000000000000000000000000000000008C430000000000000000000000005F436F72446C6C4D61696E006D73636F7265652E646C6C0000000000FF25002000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001001000000018000080000000000000000000000000000001000100000030000080000000000000000000000000000001000000000048000000586000005C02000000000000000000005C0234000000560053005F00560045005200530049004F004E005F0049004E0046004F0000000000BD04EFFE00000100000000000000000000000000000000003F000000000000000400000002000000000000000000000000000000440000000100560061007200460069006C00650049006E0066006F00000000002400040000005400720061006E0073006C006100740069006F006E00000000000000B004BC010000010053007400720069006E006700460069006C00650049006E0066006F0000009801000001003000300030003000300034006200300000002C0002000100460069006C0065004400650073006300720069007000740069006F006E000000000020000000300008000100460069006C006500560065007200730069006F006E000000000030002E0030002E0030002E003000000042001100010049006E007400650072006E0061006C004E0061006D006500000041007300730065006D0062006C00790048007400740070002E0064006C006C00000000002800020001004C006500670061006C0043006F0070007900720069006700680074000000200000004A00110001004F0072006900670069006E0061006C00460069006C0065006E0061006D006500000041007300730065006D0062006C00790048007400740070002E0064006C006C0000000000340008000100500072006F006400750063007400560065007200730069006F006E00000030002E0030002E0030002E003000000038000800010041007300730065006D0062006C0079002000560065007200730069006F006E00000030002E0030002E0030002E00300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004000000C000000AC3300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000  

-- trust the assembly with sp_add_trusted_assembly
SET @hash = (SELECT TOP 1 hash FROM sys.trusted_assemblies WHERE description = 'AssemblyHttp')
IF @hash IS NOT NULL EXEC sp_drop_trusted_assembly @hash
DROP FUNCTION IF EXISTS dbo.HttpRequest
DROP ASSEMBLY IF EXISTS AssemblyHttp

SET @hash = HASHBYTES('SHA2_512', @clrBinary)
EXEC sp_add_trusted_assembly @hash, N'AssemblyHttp'

-- Create the assembly and the function associated
CREATE ASSEMBLY AssemblyHttp AUTHORIZATION [dbo] FROM @clrBinary WITH PERMISSION_SET = UNSAFE;

EXEC ('CREATE FUNCTION dbo.HttpRequest(@requestType AS NVARCHAR(8), @url AS NVARCHAR(MAX), @headers AS NVARCHAR(MAX), @body AS NVARCHAR(MAX)) 
    RETURNS TABLE (StatusCode INT, Response NVARCHAR(MAX), Headers NVARCHAR(MAX)) AS EXTERNAL NAME [AssemblyHttp].UserDefinedFunctions.HttpRequest')
